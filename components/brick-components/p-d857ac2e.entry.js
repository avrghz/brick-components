import{r as t,c as o,h as r,H as e,g as p}from"./p-dd77af2d.js";import{c as i}from"./p-dff9bbcc.js";const s=class{constructor(r){t(this,r),this.open=!1,this.clickOutsideToClose=!0,this.disabled=!1,this.setFocus=t=>{t&&t.focus()},this.onMenuClick=t=>{t.stopPropagation()},this.onOutsideClickHandler=t=>{this.el.contains(t.target)||(this.open=!1)},this.onMenuKeydownHandler=t=>{this.bkMenuKeydown.emit(t.key)},this.bkOpened=o(this,"bkOpened",7),this.bkClosed=o(this,"bkClosed",7),this.bkMenuKeydown=o(this,"bkMenuKeydown",7)}componentDidLoad(){this.menuHandler(),this.controlRef=this.el.querySelector('[slot="control"]')}componentWillUpdate(){this.open&&this.disabled&&(this.open=!1)}componentDidUpdate(){this.menuHandler()}componentDidUnload(){this.destroyPopper()}menuHandler(){this.open&&!this.disabled?this.initPopper():this.destroyPopper(),this.registerDomClick(this.clickOutsideToClose&&this.open)}initPopper(){this.popoverRef&&(this.popperInstance=i(this.el,this.popoverRef,{placement:"bottom-end",modifiers:[{name:"arrow",options:{padding:12}},{name:"flip",options:{fallbackPlacements:["bottom-start","top-end","top-start"]}}]}),this.popoverRef.style.opacity="1",this.menuRef&&this.setFocus(this.menuRef),this.bkOpened.emit())}destroyPopper(){this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=void 0,this.bkClosed.emit()),this.timer&&clearTimeout(this.timer)}onClickHandler(t){t.stopImmediatePropagation(),this.disabled||(this.open=!this.open)}onCloseMenu(){this.open=!1,this.controlRef&&(this.timer=setTimeout(()=>this.setFocus(this.controlRef)))}onKeyboardHandler(t){switch(t.key){case"ArrowDown":case"ArrowUp":t.stopImmediatePropagation(),this.open=!0;break;case"Enter":t.stopImmediatePropagation(),this.open&&this.controlRef&&this.setFocus(this.controlRef);break;case"Escape":t.stopImmediatePropagation(),this.open=!1,this.controlRef&&this.setFocus(this.controlRef)}this.bkMenuKeydown.emit(t.key)}registerDomClick(t=!0){t?(document.addEventListener("click",this.onOutsideClickHandler),document.addEventListener("keyup",this.onOutsideClickHandler)):(document.removeEventListener("click",this.onOutsideClickHandler),document.removeEventListener("keyup",this.onOutsideClickHandler))}render(){return r(e,{role:"button","aria-haspopup":"true","aria-expanded":this.open,class:this.disabled?"bk-dropdown--disabled":""},r("div",{class:"bk-dropdown"},r("slot",{name:"control"}),this.open&&r("div",{class:"bk-dropdown-menu bk-popper",onClick:this.onMenuClick,ref:t=>this.popoverRef=t,tabIndex:-1},r("div",{class:"bk-dropdown-menu__inner",tabIndex:-1,ref:t=>this.menuRef=t},r("div",{class:"bk-popper__arrow","data-popper-arrow":!0}),r("slot",{name:"content"})))))}get el(){return p(this)}};s.style='.bk-popper__arrow,.bk-popper__arrow::after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.bk-popper__arrow{border-width:6px;filter:drop-shadow(0 2px 12px rgba(0, 0, 0, 0.03))}.bk-popper__arrow::after{content:" ";border-width:6px}.bk-popper[data-popper-placement^=top] .bk-popper__arrow{bottom:-6px;left:50%;margin-right:3px;border-top-color:#ebeef5;border-bottom-width:0}.bk-popper[data-popper-placement^=top] .bk-popper__arrow::after{bottom:0;margin-left:-6px;border-top-color:#ffffff;border-bottom-width:0}.bk-popper[data-popper-placement^=bottom] .bk-popper__arrow{top:-6px;left:50%;margin-right:3px;border-top-width:0;border-bottom-color:#ebeef5}.bk-popper[data-popper-placement^=bottom] .bk-popper__arrow::after{top:0;margin-left:-6px;border-top-width:0;border-bottom-color:#ffffff}.bk-popper[data-popper-placement^=right] .bk-popper__arrow{top:50%;left:-6px;margin-bottom:3px;border-right-color:#ebeef5;border-left-width:0}.bk-popper[data-popper-placement^=right] .bk-popper__arrow::after{bottom:-6px;left:0;border-right-color:#ffffff;border-left-width:0}.bk-popper[data-popper-placement^=left] .bk-popper__arrow{top:50%;right:-6px;margin-bottom:3px;border-right-width:0;border-left-color:#ebeef5}.bk-popper[data-popper-placement^=left] .bk-popper__arrow::after{right:0;bottom:-6px;margin-left:-6px;border-right-width:0;border-left-color:#ffffff}:host{display:inline-block}:host(.bk-dropdown--disabled){opacity:0.5;pointer-events:none}.bk-dropdown{display:inline-block;position:relative;color:#606266;font-size:14px}.bk-dropdown-menu{position:absolute;top:0;left:0;z-index:10;opacity:0;transition:opacity 0.2s ease-in;padding:10px;box-sizing:border-box}.bk-dropdown-menu__inner{position:relative;padding:20px;box-shadow:0 2px 12px 0 rgba(0, 0, 0, 0.1);background-color:#ffffff;border:1px solid #ebeef5;border-radius:4px;box-sizing:border-box;min-width:150px;max-width:300px;outline:none}.bk-dropdown-menu:focus:active,.bk-dropdown-menu:focus{outline-width:0}';export{s as bk_dropdown}